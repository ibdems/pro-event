{% extends "event/base.html" %}
{% block title %}
  Détail de l'événement
{% endblock title %}

{% block content %}
<section class="py-5 bg-light">
  <div class="container">
    <!-- Titre de la page -->
    <h2 class="text-primary text-center mt-4 mb-4 scroll-animated">Détails de l'événement</h2>

    <!-- Section des détails de l'événement -->
    <div class="row g-5">
      <!-- Colonne gauche : Image et informations principales -->
      <div class="col-lg-8">
        <img src="{{ event.image.url }}" alt="{{ event.title }}" class="img-fluid rounded shadow scroll-animated">

        <!-- Informations principales sous l'image -->
        <div class="row text-center mt-3">
          <div class="col-lg-3 col-6 mb-3">
            <i class="fas fa-calendar-alt text-primary fa-2x"></i>
            <p class="mb-0 text-muted">{{ event.start_date|date:"d M Y" }} - {{ event.end_date|date:"d M Y" }}</p>
          </div>
          <div class="col-lg-3 col-6 mb-3">
            <i class="fas fa-clock text-primary fa-2x"></i>
            <p class="mb-0 text-muted">{{ event.start_date|time:"H:i" }} - {{ event.end_date|time:"H:i" }}</p>
          </div>
          <div class="col-lg-3 col-6 mb-3">
            <i class="fas fa-map-marker-alt text-primary fa-2x"></i>
            <p class="mb-0 text-muted">{{ event.location }}</p>
          </div>
          <div class="col-lg-3 col-6 mb-3">
            <i class="fas fa-users text-primary fa-2x"></i>
            <p class="mb-0 text-muted">{{ event.total_capacity }} personnes</p>
          </div>
          <div class="col-lg-3 col-6 mb-3">
            <i class="fas fa-folder-open text-primary fa-2x"></i>
            <p class="mb-0 text-muted">Catégorie : {{ event.category.name }}</p>
          </div>
          <div class="col-lg-3 col-6 mb-3">
            <i class="fas fa-unlock text-primary fa-2x"></i>
            <p class="mb-0 text-muted">Type d'accès : {{ event.type_access|title }}</p>
          </div>
        </div>

        <p class="mt-4 text-muted">{{ event.description }}</p>
      </div>

      <!-- Colonne droite : Informations sur les partenaires et les tickets -->
      <div class="col-lg-4">
        <!-- Partenaires -->
        <div class="mb-4">
          <h4 class="text-primary scroll-animated">Partenaires</h4>
          <div class="d-flex flex-wrap gap-3">
            {% for partner in event.partner.all %}
              <div class="text-center">
                {% if partner.logo %}
                  <img src="{{ partner.logo.url }}" alt="{{ partner.name }}" class="rounded-circle" width="60" height="60">
                {% else %}
                  <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center" style="width: 60px; height: 60px;">
                    <i class="fas fa-building"></i>
                  </div>
                {% endif %}
                <p class="mt-2 mb-0 small text-muted">{{ partner.name }}</p>
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- Tickets -->
        <div>
          <h4 class="text-primary scroll-animated">Tickets</h4>
          <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <span>
                <i class="fas fa-ticket-alt text-primary me-2"></i>
                Ticket Normal
              </span>
              <span class="fs-5 fw-bold">{{ event.prix_normal|floatformat:2 }} GNF</span>
            </li>
            {% if event.prix_vip > 0 %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <span>
                <i class="fas fa-star text-warning me-2"></i>
                Ticket VIP
              </span>
              <span class="fs-5 fw-bold">{{ event.prix_vip|floatformat:2 }} GNF</span>
            </li>
            {% endif %}
            {% if event.prix_vvip > 0 %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
              <span>
                <i class="fas fa-crown text-warning me-2"></i>
                Ticket VVIP
              </span>
              <span class="fs-5 fw-bold">{{ event.prix_vvip|floatformat:2 }} GNF</span>
            </li>
            {% endif %}
          </ul>
        </div>

        <!-- Bouton Paiement -->
        <div class="text-center mt-5 scroll-animated">
          {% if event.available_capacity > 0 %}
            <a href="" class="btn btn-primary btn-lg">
              <i class="fas fa-credit-card me-2"></i> Acheter un ticket
            </a>
          {% else %}
            <button class="btn btn-secondary btn-lg" disabled>
              <i class="fas fa-ban me-2"></i> Événement complet
            </button>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock content %}
